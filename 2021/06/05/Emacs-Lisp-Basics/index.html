<!DOCTYPE html>
<html lang=zh>
<head>
  <!-- so meta -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
  <meta name="baidu-site-verification" content="fmlEuI34ir" />
  <meta name="google-site-verification" content="yCy2azpds5XSuGZvis6OuA-XIGF5GuGpYRAaGfD6o48" />
    <meta name="description" content="Emacs Lisp Basics 整篇文章都是跟着李杀大神的教程来的 原文地址: http:&#x2F;&#x2F;ergoemacs.org&#x2F;emacs&#x2F;elisp_basics.html 这里使用的是 lisp-interaction-mode，只需要在表达式后面键入 C-j 就可以在下一行输出结果了 或者使用 emacs-lisp-mode 在函数尾部输入 C-x C-e 执行函数，可以在下面看到结果 spa">
<meta property="og:type" content="article">
<meta property="og:title" content="Emacs Lisp Basics">
<meta property="og:url" content="http://example.com/2021/06/05/Emacs-Lisp-Basics/index.html">
<meta property="og:site_name" content="再见,明奇">
<meta property="og:description" content="Emacs Lisp Basics 整篇文章都是跟着李杀大神的教程来的 原文地址: http:&#x2F;&#x2F;ergoemacs.org&#x2F;emacs&#x2F;elisp_basics.html 这里使用的是 lisp-interaction-mode，只需要在表达式后面键入 C-j 就可以在下一行输出结果了 或者使用 emacs-lisp-mode 在函数尾部输入 C-x C-e 执行函数，可以在下面看到结果 spa">
<meta property="og:locale">
<meta property="article:published_time" content="2021-06-05T11:47:26.000Z">
<meta property="article:modified_time" content="2022-07-15T07:32:54.985Z">
<meta property="article:author" content="再见,明奇">
<meta property="article:tag" content="Emacs">
<meta property="article:tag" content="elisp">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Emacs Lisp Basics</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" "Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/categories/">Category</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post " href="/2022/07/13/hello-world/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post " href="/2021/06/04/The-first-article/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top " href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2021/06/05/Emacs-Lisp-Basics/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&text=Emacs Lisp Basics"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&is_video=false&description=Emacs Lisp Basics"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Emacs Lisp Basics&body=Check out this article: http://example.com/2021/06/05/Emacs-Lisp-Basics/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&name=Emacs Lisp Basics&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2021/06/05/Emacs-Lisp-Basics/&t=Emacs Lisp Basics"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Emacs-Lisp-Basics"><span class="toc-number">1.</span> <span class="toc-text">Emacs Lisp Basics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Printing"><span class="toc-number">1.1.</span> <span class="toc-text">Printing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arithmetic-%EF%BC%88%E8%AE%A1%E7%AE%97%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">Arithmetic （计算）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#True-False"><span class="toc-number">1.3.</span> <span class="toc-text">True, False</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Comparing-string"><span class="toc-number">1.4.</span> <span class="toc-text">Comparing string</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#even-odd"><span class="toc-number">1.5.</span> <span class="toc-text">even, odd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Variables"><span class="toc-number">1.6.</span> <span class="toc-text">Variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#If-Then-Else"><span class="toc-number">1.7.</span> <span class="toc-text">If Then Else</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Block-of-Expressions"><span class="toc-number">1.8.</span> <span class="toc-text">Block of Expressions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Loop"><span class="toc-number">1.9.</span> <span class="toc-text">Loop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Define-a-Function"><span class="toc-number">1.10.</span> <span class="toc-text">Define a Function</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Emacs Lisp Basics
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">再见,明奇</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-06-05T11:47:26.000Z" itemprop="datePublished">2021-06-05</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Emacs/">Emacs</a> › <a class="category-link" href="/categories/Emacs/elisp/">elisp</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Emacs/" rel="tag">Emacs</a>, <a class="tag-link-link" href="/tags/elisp/" rel="tag">elisp</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="Emacs-Lisp-Basics"><a href="#Emacs-Lisp-Basics" class="headerlink" title="Emacs Lisp Basics"></a>Emacs Lisp Basics</h2><ul>
<li>整篇文章都是跟着李杀大神的教程来的</li>
<li>原文地址: <a target="_blank" rel="noopener" href="http://ergoemacs.org/emacs/elisp_basics.html">http://ergoemacs.org/emacs/elisp_basics.html</a></li>
<li>这里使用的是 lisp-interaction-mode，只需要在表达式后面键入 C-j 就可以在下一行输出结果了</li>
<li>或者使用 emacs-lisp-mode 在函数尾部输入 C-x C-e 执行函数，可以在下面看到结果</li>
<li>spacemacs 使用 <code>, e f</code> 快捷键和 C-x C-e 是一样的</li>
</ul>
<h3 id="Printing"><a href="#Printing" class="headerlink" title="Printing"></a>Printing</h3><ul>
<li>这里只有 <code>%S</code> 特殊一点<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(message &quot;h1&quot;) ; &quot;h1&quot;</span><br><span class="line"></span><br><span class="line">;; printing variable values</span><br><span class="line">(message &quot;Her age is : %d&quot; 16) ; &quot;Her age is : 16&quot;</span><br><span class="line">(message &quot;Her name is: %s&quot; &quot;Vicky&quot;) ; &quot;Her name is: Vicky&quot;</span><br><span class="line"></span><br><span class="line">;; %S 可以输出任意 lisp 表达式</span><br><span class="line">(message &quot;My list is: %S&quot; (list 8 2 3)) ; &quot;My list is: (8 2 3)&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Arithmetic-（计算）"><a href="#Arithmetic-（计算）" class="headerlink" title="Arithmetic （计算）"></a>Arithmetic （计算）</h3><ul>
<li>lisp 语言把符号写在前面的好处之一是符号只用写一遍，后面随便加参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">(+ 4 5 1)  ; 10</span><br><span class="line">(- 9 2)    ; 7</span><br><span class="line">(- 9 2 3)  ; 4</span><br><span class="line">(* 2 3)    ; 6</span><br><span class="line">(* 2 3 2)  ; 12</span><br><span class="line"></span><br><span class="line">;; integer part of quotient</span><br><span class="line">(/ 7 2)    ; 3</span><br><span class="line">(/ 7 2.)    ; 3</span><br><span class="line"></span><br><span class="line">;; division</span><br><span class="line">(/ 7 2.0)  ; 3.5</span><br><span class="line"></span><br><span class="line">;; mod, remainder</span><br><span class="line">(% 7 4)    ; 3</span><br><span class="line"></span><br><span class="line">;; power; exponential</span><br><span class="line">(expt 2 3) ; 8</span><br><span class="line"></span><br><span class="line">;; warning : 一位十进制数，如 2. 需要在点后加一个零，</span><br><span class="line">;; 像这样：2.0。例如， (/ 7 2.) 返回 3，而不是 3.5。</span><br><span class="line"></span><br><span class="line">;; 3. 是整数, 3.0 是一个小数</span><br><span class="line">;; 以 p 结尾的函数名通常会返回 true 或者 false</span><br><span class="line">;; p 代表这是一个 &quot;谓词&quot;（predicate）</span><br><span class="line">;; 在 lisp 里， t 表示真，nil 表示假</span><br><span class="line">(integerp 3.) ;  t</span><br><span class="line">(floatp 3.) ;  nil</span><br><span class="line">(floatp 3.0) ;  t</span><br><span class="line"></span><br><span class="line">;; Convert Float/Integer</span><br><span class="line">;; int to float</span><br><span class="line">(float 3) ; 3.0</span><br><span class="line">(truncate 3.3) ; 3</span><br><span class="line">(floor 3.3) ; 3</span><br><span class="line">(ceiling 3.3) ; 4</span><br><span class="line">(round 3.4) ; 3</span><br><span class="line"></span><br><span class="line">;; Convert String and Number</span><br><span class="line">(string-to-number &quot;3&quot;) ; 3</span><br><span class="line">(number-to-string 3) ; &quot;3&quot;</span><br><span class="line"></span><br><span class="line">;; 也可以使用 format 来完成字符串和数字的转换，后面会说</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="True-False"><a href="#True-False" class="headerlink" title="True, False"></a>True, False</h3><ul>
<li>在 elisp里，nil 是 false，其他都是 true</li>
<li>nil == (), () 是空列表<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">;; all the following are false. They all evaluate to nil</span><br><span class="line">(if nil &quot;yes&quot; &quot;no&quot;) ;  &quot;no&quot;</span><br><span class="line">(if () &quot;yes&quot; &quot;no&quot;) ;  &quot;no&quot;</span><br><span class="line">(if &#x27;() &quot;yes&quot; &quot;no&quot;) ;  &quot;no&quot;</span><br><span class="line">(if (list) &quot;yes&quot; &quot;no&quot;) ;  &quot;no&quot;, because (list) eval to a empty list, same as ()</span><br><span class="line"></span><br><span class="line">;; t 用来表示 真</span><br><span class="line">(if t &quot;yes&quot; &quot;no&quot;) ;  &quot;yes&quot;</span><br><span class="line">(if 0 &quot;yes&quot; &quot;no&quot;) ;  &quot;yes&quot;</span><br><span class="line">(if &quot;&quot; &quot;yes&quot; &quot;no&quot;) ;  &quot;yes&quot;</span><br><span class="line">(if [] &quot;yes&quot; &quot;no&quot;) ;  &quot;yes&quot;. The [] is vector of 0 elements</span><br><span class="line"></span><br><span class="line">;; elisp 中没有“布尔数据类型”。只要记住 nil 和 empty list () 都是假的，其他的都是真的。</span><br><span class="line"></span><br><span class="line">;; Boolean Functions</span><br><span class="line"></span><br><span class="line">;; Here&#x27;s and and or.</span><br><span class="line"></span><br><span class="line">(and t nil) ;  nil</span><br><span class="line">(or t nil) ;  t</span><br><span class="line"></span><br><span class="line">;; can take multiple args</span><br><span class="line">(and t nil t t t t) ;  nil</span><br><span class="line"></span><br><span class="line">(&lt; 3 4) ; less than</span><br><span class="line">(&gt; 3 4) ; greater than</span><br><span class="line"></span><br><span class="line">(&lt;= 3 4) ; less or equal to</span><br><span class="line">(&gt;= 3 4) ; greater or equal to</span><br><span class="line"></span><br><span class="line">(= 3 3)   ;  t</span><br><span class="line">(= 3 3.00000000000000001) ;  t</span><br><span class="line"></span><br><span class="line">(/= 3 4) ; not equal. ⇒ t</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Comparing-string"><a href="#Comparing-string" class="headerlink" title="Comparing string"></a>Comparing string</h3><ul>
<li><p>注意 string-equal 是专门对比字符串和符号的函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(equal &quot;abc&quot; &quot;abc&quot;) ;  t</span><br><span class="line"></span><br><span class="line">;; dedicated function for comparing string</span><br><span class="line">(string-equal &quot;abc&quot; &quot;abc&quot;) ;  t</span><br><span class="line"></span><br><span class="line">(string-equal &quot;abc&quot; &quot;Abc&quot;) ;  nil. Case matters</span><br><span class="line"></span><br><span class="line">;; can be used to compare string and symbol</span><br><span class="line">(string-equal &quot;abc&quot; &#x27;abc) ;  t</span><br></pre></td></tr></table></figure></li>
<li><p>对一般的相等测试，使用 equal。它测试两个值是否具有相同的数据类型和值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">(equal 3 3) ;  t</span><br><span class="line">(equal 3.0 3.0) ;  t</span><br><span class="line"></span><br><span class="line">(equal 3 3.0) ;  nil. Because datatype doesn&#x27;t match.</span><br><span class="line"></span><br><span class="line">;; test equality of lists</span><br><span class="line">(equal &#x27;(3 4 5) &#x27;(3 4 5))  ;  t</span><br><span class="line">(equal &#x27;(3 4 5) &#x27;(3 4 &quot;5&quot;)) ;  nil</span><br><span class="line"></span><br><span class="line">;; test equality of strings</span><br><span class="line">(equal &quot;e&quot; &quot;e&quot;) ;  t</span><br><span class="line"></span><br><span class="line">;; test equality of symbols</span><br><span class="line">(equal &#x27;abc &#x27;abc) ;  t</span><br><span class="line"></span><br><span class="line">;; 还有函数 eq，如果两个 args 是同一个 Lisp 对象，它会返回 t。</span><br><span class="line">;; 这通常不是您想要的。 (eq &quot;e&quot; &quot;e&quot;) 返回 nil。</span><br><span class="line">(eq &quot;e&quot; &quot;e&quot;) ; nil</span><br><span class="line"></span><br><span class="line">;; To test for inequality, the /= is for numbers only, and doesn&#x27;t work for strings and other lisp data. Use not to negate your equality test, like this:</span><br><span class="line">;; 为了测试不等式， /= 仅适用于数字，不适用于字符串和其他 lisp 数据。使用 not 否定您的相等性测试，如下所示：</span><br><span class="line">(not (= 3 4)) ; t</span><br><span class="line">(/= 3 4) ; t</span><br><span class="line">;; General way to test inequality. 一般测试不等式的方式:</span><br><span class="line">(not (equal 3 4)) ; t</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="even-odd"><a href="#even-odd" class="headerlink" title="even, odd"></a>even, odd</h3><ul>
<li>可以封装成一个函数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(= (% n 2) 0) ; test even</span><br><span class="line"></span><br><span class="line">(= (% n 2) 1) ; test odd</span><br><span class="line"></span><br><span class="line">(defun test-even (n)</span><br><span class="line">  (= (% n 2) 0))</span><br><span class="line"></span><br><span class="line">(test-even 4) ; t</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h3><ul>
<li>Global Variables<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;; setq is used to set variables. Variables need not be declared, and is global.</span><br><span class="line">(setq x 1) ; assign 1 to x</span><br><span class="line">(setq a 3 b 2 c 7) ; multiple assignment</span><br></pre></td></tr></table></figure></li>
<li>Local Variables<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">;; To define local variables, use let. The form is:</span><br><span class="line">(let (var1 var2 …) body)</span><br><span class="line"></span><br><span class="line">(let (a b)</span><br><span class="line">(setq a 3)</span><br><span class="line">(setq b 4)</span><br><span class="line">  (+ a b)) ; 7</span><br><span class="line"></span><br><span class="line">;; 以下代码控制台只会输出 456，因为只返回最后一个值，查看 *Message* buffer 就能看到 123 其实也被输出了</span><br><span class="line">(let (a b)</span><br><span class="line">  (setq a &quot;123&quot;)</span><br><span class="line">  (setq b &quot;456&quot;)</span><br><span class="line">  (message a)</span><br><span class="line">  (message b)) ; &quot;123&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;; Another form of let is this:</span><br><span class="line">;; This form lets you set values to variable without using many setq in the body. This form is convenient if you just have a few simple local vars with known values.</span><br><span class="line">(let ((var1 val1) (var2 val2) …) body)</span><br><span class="line"></span><br><span class="line">;; 在列表内给参数单独赋值</span><br><span class="line">(let ((a 3) (b 4))</span><br><span class="line">  (+ a b)) ;  7</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="If-Then-Else"><a href="#If-Then-Else" class="headerlink" title="If Then Else"></a>If Then Else</h3><ul>
<li><code>when</code> 就是没有 <code>else</code> 的 <code>if</code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">;; The form for “if” expression is:</span><br><span class="line">(if test body)</span><br><span class="line">;; or</span><br><span class="line">(if test true_body false_body)</span><br><span class="line"></span><br><span class="line">(if (&lt; 3 2) 7 8 ) ; 8</span><br><span class="line"></span><br><span class="line">;; no false expression, return nil</span><br><span class="line">(if (&lt; 3 2) (message &quot;yes&quot;) ) ; nil</span><br><span class="line"></span><br><span class="line">;; If you do not need a “else” part, you should use the function when instead, because it is more clear. The form is:</span><br><span class="line">(when test expr1 expr2 …)</span><br><span class="line"></span><br><span class="line">;; Its meaning is the same as</span><br><span class="line">(if test (progn expr1 expr2 …))</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Block-of-Expressions"><a href="#Block-of-Expressions" class="headerlink" title="Block of Expressions"></a>Block of Expressions</h3><ul>
<li>let 也有组合表达式的功能<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;; Sometimes you need to group several expressions together as one single expression. This can be done with progn.</span></span><br><span class="line"><span class="comment">;; 这句代码在控制台只能输出 &quot;b&quot;, 同样是去 message buffer就能看到 a 了, 控制台只输出最后一个返回值</span></span><br><span class="line">(<span class="name">progn</span> (<span class="name">message</span> <span class="string">&quot;a&quot;</span>) (<span class="name">message</span> <span class="string">&quot;b&quot;</span>))</span><br><span class="line"><span class="comment">;; is equivalent to</span></span><br><span class="line">(<span class="name">message</span> <span class="string">&quot;a&quot;</span>) (<span class="name">message</span> <span class="string">&quot;b&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">;; The purpose of (progn …) is similar to a block of code &#123;…&#125; in C-like languages. It is used to group together a bunch of expressions into one single parenthesized expression. Most of the time it&#x27;s used inside “if”.</span></span><br><span class="line">(<span class="name">if</span> something</span><br><span class="line">  (<span class="name">progn</span> <span class="comment">; true</span></span><br><span class="line">    …</span><br><span class="line">    )</span><br><span class="line">  (<span class="name">progn</span></span><br><span class="line">    … <span class="comment">; there is else</span></span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line"><span class="comment">;; progn returns the last expression in its body.</span></span><br><span class="line">(<span class="name">progn</span> <span class="number">3</span> <span class="number">4</span> ) <span class="comment">; 4</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Loop"><a href="#Loop" class="headerlink" title="Loop"></a>Loop</h3><ul>
<li>Most basic loop in elisp is with while.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(setq x 0)</span><br><span class="line">(while (&lt; x 4)</span><br><span class="line">(print (format &quot;number is %d&quot; x))</span><br><span class="line">(setq x (1+ x)))</span><br><span class="line"></span><br><span class="line">;; inserts Unicode chars 32 to 126</span><br><span class="line">(let ((x 32))</span><br><span class="line">  (while (&lt; x 127)</span><br><span class="line">  (insert-char x)</span><br><span class="line">  (setq x (+ x 1))))</span><br><span class="line">;; !&quot;#$%&amp;&#x27;()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz&#123;|&#125;~</span><br><span class="line"></span><br><span class="line">;; Usually it&#x27;s better to use dolist or dotimes.</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Define-a-Function"><a href="#Define-a-Function" class="headerlink" title="Define a Function"></a>Define a Function</h3><ul>
<li>当一个函数被调用时，永远都是返回函数体内的最后一句，<code>lisp</code> 里面没有 <code>return statement</code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;; Basic function definition is of the form:</span><br><span class="line">(defun function-name (param1 param2 …) doc_string body)</span><br><span class="line"></span><br><span class="line">(defun my-function ()</span><br><span class="line">  &quot;testing&quot;</span><br><span class="line">  (message &quot;Yay!&quot;))</span><br></pre></td></tr></table></figure></li>
<li>命令是 <code>emacs</code> 用户可以通过 <code>execute-extended-command【Alt+x】</code>调用的函数。</li>
<li>当一个函数也是一个命令时，我们说该函数可用于交互使用。</li>
<li>要使函数可用于交互式使用，请在文档字符串之后添加 (interactive)。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">;; 以下代码可以使用 execute-extended-command 调用</span><br><span class="line">(defun yay ()</span><br><span class="line">&quot;Insert “Yay!” at cursor position.&quot;</span><br><span class="line">(interactive)</span><br><span class="line">(insert &quot;Yay!&quot;))</span><br><span class="line"></span><br><span class="line">;; Here is a function definition template that majority of elisp commands follow:</span><br><span class="line">(defun myCommand ()</span><br><span class="line">&quot;One sentence summary of what this command do. More detailed documentation here.&quot;</span><br><span class="line">  (interactive)</span><br><span class="line">  (let (localVar1 localVar2 …)</span><br><span class="line">    ; do something here …</span><br><span class="line">    ; …</span><br><span class="line">    ; last expression is returned</span><br><span class="line">  ))</span><br></pre></td></tr></table></figure></li>
</ul>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/categories/">Category</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Emacs-Lisp-Basics"><span class="toc-number">1.</span> <span class="toc-text">Emacs Lisp Basics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Printing"><span class="toc-number">1.1.</span> <span class="toc-text">Printing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arithmetic-%EF%BC%88%E8%AE%A1%E7%AE%97%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">Arithmetic （计算）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#True-False"><span class="toc-number">1.3.</span> <span class="toc-text">True, False</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Comparing-string"><span class="toc-number">1.4.</span> <span class="toc-text">Comparing string</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#even-odd"><span class="toc-number">1.5.</span> <span class="toc-text">even, odd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Variables"><span class="toc-number">1.6.</span> <span class="toc-text">Variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#If-Then-Else"><span class="toc-number">1.7.</span> <span class="toc-text">If Then Else</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Block-of-Expressions"><span class="toc-number">1.8.</span> <span class="toc-text">Block of Expressions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Loop"><span class="toc-number">1.9.</span> <span class="toc-text">Loop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Define-a-Function"><span class="toc-number">1.10.</span> <span class="toc-text">Define a Function</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2021/06/05/Emacs-Lisp-Basics/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&text=Emacs Lisp Basics"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&is_video=false&description=Emacs Lisp Basics"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Emacs Lisp Basics&body=Check out this article: http://example.com/2021/06/05/Emacs-Lisp-Basics/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&title=Emacs Lisp Basics"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2021/06/05/Emacs-Lisp-Basics/&name=Emacs Lisp Basics&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2021/06/05/Emacs-Lisp-Basics/&t=Emacs Lisp Basics"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    <span id="sitetime"></span>

    
    

    2016-2022
    再见,明奇
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="/tags/">Tag</a></li>
        
          <li><a href="/categories/">Category</a></li>
        
      </ul>
    </nav>
  </div>
</footer>
<script language=javascript>
 function siteTime() {
   window.setTimeout("siteTime()", 1000);
   var seconds = 1000;
   var minutes = seconds * 60;
   var hours = minutes * 60;
   var days = hours * 24;
   var years = days * 365;
   var today = new Date();
   var todayYear = today.getFullYear();
   var todayMonth = today.getMonth() + 1;
   var todayDate = today.getDate();
   var todayHour = today.getHours();
   var todayMinute = today.getMinutes();
   var todaySecond = today.getSeconds();
   /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
      year - 作为date对象的年份，为4位年份值
      month - 0-11之间的整数，做为date对象的月份
      day - 1-31之间的整数，做为date对象的天数
      hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
      minutes - 0-59之间的整数，做为date对象的分钟数
      seconds - 0-59之间的整数，做为date对象的秒数
      microseconds - 0-999之间的整数，做为date对象的毫秒数 */
   var t1 = Date.UTC(2021, 06, 04, 22, 00, 06); //北京时间2021-06-04 00:00:00
   var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
   var diff = t2 - t1;
   var diffYears = Math.floor(diff / years);
   var diffDays = Math.floor((diff / days) - diffYears * 365);
   var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
   var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
   var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
   /* document.getElementById("sitetime").innerHTML = "本站已运行 " +diffYears+" 年 "+diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒"; */
 }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
 siteTime();
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
